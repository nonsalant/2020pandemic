/* codepen.io/nonsalant/pen/jOPQRrE.js */

// Open external links in new tabs
let links = document.links;
for (let i = 0, linksLength = links.length; i < linksLength; i++) {
  if (links[i].hostname != window.location.hostname) {
    links[i].target = '_blank';
    links[i].rel = 'noopener';
  } 
}

localStorageInit();

render_stuff();
//let auto_refresh = setInterval(render_stuff, 3000);


function render_stuff() {
  render_hero();
  render_blocks();

  
  fetch('//www.cloudflare.com/cdn-cgi/trace')
    .then((response) => {
      return response.text();
    })
    .then((data) => { 
      let value = data.split('\n')[8].split('loc=')[1];
      value = getCountryName(value);
      document.getElementById("hero-local").id= "hero-"+value;
      //console.log("hero-"+value);
      render_hero(("hero-"+value));
    });
} 

function toggle_auto_refresh(checked) {
  if (checked) {
    auto_refresh = setInterval(render_stuff, 3000);
    document.querySelectorAll('.legend')[0].style.backgroundColor='#F3F3B6';
    if (document.querySelector('#Global')) document.querySelector('#Global').style.backgroundColor="hsla(60, 60%, 85%, 0.53)";
  } else {
    clearInterval(auto_refresh);
    document.querySelectorAll('.legend')[0].style.backgroundColor='rgba(245, 245, 245, 1)';
    if (document.querySelector('#Global')) document.querySelector('#Global').style.backgroundColor="hsla(60, 0%, 95%, 0.53)";
  }
}

function render_hero(id="hero-global") {
  let url, country;
  
  if (id == "hero-global") {
    country = "Global";
    url = "https://coronavirus-19-api.herokuapp.com/all/";
    
  } else {
    if (id.startsWith("hero-")) {
      country=id.split("hero-")[1].replace(/ /g, "%20");
      url = "https://coronavirus-19-api.herokuapp.com/countries/" + country;
      //console.log(url)
    }
  }
  
  fetch(url).then((response)=>{return response.json();})
    .then((data) => {
      let recovered = Number(data.recovered.toFixed(0));
      let deaths = Number(data.deaths.toFixed(0));
      let cases = Number(data.cases.toFixed(0));

      let percentage = (((recovered + deaths) / cases) * 100).toFixed(0);
      let percentageEmpty = 100 - percentage;
    
      let cr_precise = ((recovered + deaths) / cases);
      let cr = cr_precise.toFixed(2); 
    
      let extra_css;
    
      if (country == "Global") {
        extra_css = `
        <style>
        .virus::before {
          /* Grab Google image graph (pie chart) */
          background: url("https://chart.googleapis.com/chart?cht=p&chd=t:${percentage},${percentageEmpty}&chs=200x200&chco=DCD3C0,ffefcc") center center no-repeat;
          background-size: contain;
          opacity: .90;
          content: "";
          position: absolute;
          width: 1.5em;
          height: 1.5em;
          border-radius: 100%; border:0; padding:0;
          display: block;
        }

        #hero-global-label::before {
          content: "üåé ";
        }
        </style>
        `;
      } else {
        extra_css = `
        <style>
        #hero-local-label::before {
          content: "${flag_emoji(country)} ";
        }
        #hero-local-label::after {
          content: " in ${country}:";
        }
        <style>
        `
      }
      document.getElementsByTagName('body')[0].innerHTML+=extra_css;

      document.getElementById(id).innerHTML = `
      <div class="percentage-bar" style="width:${percentage}%;">
        <button class="no-button-styles"
        style="cursor: default !important;"
        data-tooltip="C. RATIO = ${cr_precise.toFixed(4)}"
        >
        ${percentage}%
        </button>
      </div>
      <small class="percentage-empty">
          ${percentageEmpty}% ü¶† ACTIVE CASES
      </small>
      `;
    });
  
}

function render_blocks() {
  let blocks = document.getElementsByClassName("block");
  for (let i = 0; i < blocks.length; i++) {
    render(blocks[i].id); 
    let blocks_array=[];
    blocks_array[i]=blocks[i].id;
    //console.log(blocks_array[i]);
  } 
  
}

function render(id) {
  
  if (!id) return;
  
  let url = ""; //let txt = '{"cases":422966,"deaths":18906,"recovered":109143}';
  if (id === "Global") {
    url = "https://coronavirus-19-api.herokuapp.com/all/";
  } else {
    url = "https://coronavirus-19-api.herokuapp.com/countries/" + id;
  }
  //console.log(url);
  fetch(url)
    .then((response) => {
      return response.json();
    })
    .then((data) => {
      let recovered, deaths, cases, cr_precise, percentage;
      if(data.recovered) recovered = Number(data.recovered.toFixed(0));
      else recovered = 0;
      if (data.deaths) deaths = Number(data.deaths.toFixed(0));
      else deaths = 0;
      if (data.cases) {
        cases = Number(data.cases.toFixed(0));
        cr_precise = ((recovered + deaths) / cases);
        percentage = (((recovered + deaths) / cases) * 100).toFixed(0);
      } else {
        cases = 0;
        cr_precise = 0;
        percentage = 0;
      }
      
      let cr = cr_precise.toFixed(2);
      
      let percentageEmpty = 100 - percentage;
    
      function color_change(cr) {
        let colorClass = "gray";
        if (Number(cr) < 0.1) {
          colorClass = "red";
        }
        if (Number(cr) > 0.3) {
          colorClass = "green";
        }
        return colorClass;
      }

      document.getElementById(id).innerHTML = `
      <div class="block-data">
          <button class="close" onclick="remove_country(this)" style="display:none;">
            ‚ùå
          </button>
          <button class="country-name has-tooltip-right" 
          data-tooltip="Cases per 1 million: ${data.casesPerOneMillion} 
  Deaths per 1 million: ${data.deathsPerOneMillion}"
          >
            ${unescape(id)}:
          </button>&nbsp;
          ( 
          <button 
          data-tooltip="Tests per 1 million: ${data.testsPerOneMillion}"
         class="recovered has-tooltip-bottom" style="color:green">${recovered}</button>
          +
          <button 
          data-tooltip="Deaths today: ${data.todayDeaths}"
          class="deaths has-tooltip-bottom">${deaths}</button> ) 
          /
          <button 
          data-tooltip="Cases today: ${data.todayDeaths}"
          class="cases has-tooltip-bottom" style="color:red">${cases}</button> 
          = 
          <button 
          data-tooltip="${cr_precise.toFixed(3)} (${percentage}% )"
          class="c-ratio-wrapper has-tooltip-bottom">
            <b class="c-ratio ${color_change(cr)}">
              ${cr}
            </b>
          </button>
          <span class="flag" style="width:1em; text-align:center;">
            ${flag_emoji(id)}
          </span>
      </div> <!-- /.block-data -->
      `;
    })
    .then(() => {
      sortList();
    });
}

function sortList(sortBy=".cases", stopRefreshing = false) {
  let i, switching, b, shouldSwitch;
  switching = true;
  
  if(stopRefreshing) stop_auto_refresh();
  
  while (switching) {
    switching = false;
    b = document.querySelectorAll(".country-stats .block:not(#Global)");
    for (i = 0; i < (b.length - 1); i++) {
      shouldSwitch = false;
      if ( b[i].querySelector(sortBy) && b[i+1].querySelector(sortBy) ) {
        if ( Number(b[i].querySelector(sortBy).innerHTML) < Number(b[i + 1].querySelector(sortBy).innerHTML) ) {
          //console.log(b[i].querySelector(sortBy).innerHTML);
          shouldSwitch = true;
          break;
        }
      }
    }
    if (shouldSwitch) {
      b[i].parentNode.insertBefore(b[i + 1], b[i]);
      switching = true;
    }
  }
}

function stop_auto_refresh() {
  if(document.getElementById('autorefresh').checked) {
    document.getElementById('autorefresh').checked=false;
    toggle_auto_refresh(false);
  }
}


function toggle_close_buttons(element) {
  let close_buttons = document.querySelectorAll('.close');
  
  if (!close_buttons) return;
  
  if (typeof(close_buttons[0]) != 'undefined' && close_buttons != null) {
    if (close_buttons[0].style.display == 'none') {
      
      stop_auto_refresh();

      element.innerHTML = '&nbsp;&nbsp;&nbsp;Done deleting.&nbsp;&nbsp;';
      for (let i=0; i<close_buttons.length; i++) {
        close_buttons[i].style.display = 'block';
      }
    } else if (close_buttons[0].style.display == 'block') {
      element.innerHTML = 'Delete countries‚Ä¶';

      for (let i=0; i<close_buttons.length; i++) {
        close_buttons[i].style.display = 'none';
      } 
    }
  } else {
    element.innerHTML = 'Delete countries‚Ä¶';
    
  } 
  
}



document.querySelector('#country-list-choice').addEventListener('change', (event) => {
  let new_country = document.getElementById('country-list-choice').value;
  new_country = new_country.split(' ');
  new_country.shift();
  new_country = new_country.join(' '); 
  if (new_country && !document.getElementById(escape(new_country)) ) {
    console.log(new_country +" added.");
    add_country(new_country);
  } else if ( document.getElementById(escape(new_country)) ) {
    alert(new_country+' is already shown.')
  }
  document.getElementById('country-list-choice').value = '';
});




// localStorage

function localStorageInit() {
  let pandemicSavedCountries = localStorage.getItem('pandemicSavedCountries');
  if (!pandemicSavedCountries || pandemicSavedCountries === '{}') {
    let aaa = document.querySelectorAll('.country-stats .block');
    // let bb = aaa.map(x => x.id); 
    let aa = '';
    for (let i=0; i<aaa.length; i++) {
      aa += aaa[i].id;
      if (i<(aaa.length-1) && aaa[i].id && aaa[i].id!=='') {
          aa+=',';
      }
    }
    localStorage.setItem('pandemicSavedCountries', aa);
  } else {
    let bbb = pandemicSavedCountries.split(',');
    let bb='';
    for (let i=0; i<bbb.length; i++) {
      bb+=`
      <div id="${bbb[i]}" class="block"></div>
      `;
    }
    document.querySelector('.country-stats').innerHTML = bb;
  }
}

function remove_all_countries() {
  document.querySelector('.country-stats').innerHTML = '';
  localStorage.setItem('pandemicSavedCountries','');
}

function add_all_countries() {
  let countryOptions = document.querySelectorAll('#country-list option');
  remove_all_countries();
  for(let i=0; i<countryOptions.length; i++) {
    let new_country = countryOptions[i].value;
    new_country = new_country.split(' ');
    new_country.shift();
    new_country = new_country.join(' '); 
    if (new_country && !document.getElementById(escape(new_country)) ) {
      console.log(new_country +" added.");
      add_country(new_country, false);
    } else if ( document.getElementById(escape(new_country)) ) {
      alert(new_country+' is already shown.')
    }
  }
}

////sort_options();
// function sort_options() {
//   let i, switching, b, shouldSwitch;
//   switching = true;
//   while (switching) {
//     switching = false;
//     b = document.querySelectorAll("#country-list option");
//     for (i = 0; i < (b.length - 1); i++) {
//       shouldSwitch = false; 
//       if ( b[i].value && b[i+1].value ) {
//         let current = b[i].value.split(' ');
//         current.shift();
//         current = current.join(' ');
//         let next = b[i+1].value.split(' ');
//         next.shift();
//         next = next.join(' ');
//         if ( current > next ) {
//           shouldSwitch = true;
//           break;
//         }
//       }
//     }
//     if (shouldSwitch) {
//       b[i].parentNode.insertBefore(b[i + 1], b[i]);
//       switching = true;
//     }
//   }
// }

function remove_country(el) {
  el.parentNode.parentNode.remove(); 
  console.log(unescape(el.parentNode.parentNode.id)+' removed.')
  
  let pandemicSavedCountries = localStorage.getItem('pandemicSavedCountries');
  let bbb = pandemicSavedCountries.split(',');
  let bb='';
  for (let i=0; i<bbb.length; i++) {
    if(bbb[i]==el.parentNode.parentNode.id) {
        bbb.splice(i, 1);
       }
  }
  localStorage.setItem( 'pandemicSavedCountries', bbb.join() );
}

// add_country('Diamond Princess');
function add_country(country) { 
  document.querySelector('.country-stats').innerHTML += `
    <div id="${escape(country)}" class="block"></div>
  `;
  render(escape(country));
  //let pandemicSavedCountries = localStorage.getItem( 'pandemicSavedCountries');
  //if (pandemicSavedCountries && pandemicSavedCountries !== '{}') {
  let pandemicSavedCountries = localStorage.getItem('pandemicSavedCountries');
  let bbb=[];
  if (pandemicSavedCountries === null) {
    country=escape(country);
    bbb = [country];
  } else {
    let pandemicSavedCountries = localStorage.getItem('pandemicSavedCountries');
    bbb = pandemicSavedCountries.split(','); 
    bbb.push(escape(country));
  }
  localStorage.setItem( 'pandemicSavedCountries', bbb.join() );
}

// flag_emoji function by Stefan Matei
function flag_emoji(country) {
  switch (country) {
    case "Romania":
      return "üá∑üá¥";
    case "USA":
      return "üá∫üá∏";
    case "Global":
      return "üåé";
    case "China":
      return "üá®üá≥";
    case "Italy":
      return "üáÆüáπ";
    case "Spain":
      return "üá™üá∏";
    case "S.%20Korea":
      return "üá∞üá∑";
    case "Moldova":
      return "üá≤üá©";
    case "Bulgaria":
      return "üáßüá¨";
    case "Switzerland":
      return "üá®üá≠";
    case "UK":
      return "üá¨üáß";
    case "Iran":
      return "üáÆüá∑";
    case "France":
      return "üá´üá∑";
    case "Germany":
      return "üá©üá™";
    case "Japan":
      return "üáØüáµ";
    case "Belgium":
      return "üáßüá™";
    case "Netherlands":
      return "üá≥üá±";
    case "Turkey":
      return "üáπüá∑";
    case "Austria":
      return "üá¶üáπ";
    case "Canada":
      return "üá®üá¶";
    case "Portugal":
      return "üáµüáπ";
    case "Norway":
      return "üá≥üá¥";
    case "Brazil":
      return "üáßüá∑";
    case "Israel":
      return "üáÆüá±";
    case "Australia":
      return "üá¶üá∫";
    case "Sweden":
      return "üá∏üá™";
    case "Czechia":
      return "üá®üáø";
    case "Malaysia":
      return "üá≤üáæ";
    case "Ireland":
      return "üáÆüá™";
    case "Denmark":
      return "üá©üá∞";
    case "Chile":
      return "üá®üá±";
    case "Luxembourg":
      return "üá±üá∫";
    case "Poland":
      return "üáµüá±";
    case "Ecuador":
      return "üá™üá®";
    case "Russia":
      return "üá∑üá∫";
    case "Pakistan":
      return "üáµüá∞";
    case "Philippines":
      return "üáµüá≠";
    case "Thailand":
      return "üáπüá≠";
    case "Saudi%20Arabia":
      return "üá∏üá¶";
    case "Indonesia":
      return "üáÆüá©";
    case "Finland":
      return "üá´üáÆ";
    case "South%20Africa":
      return "üáøüá¶";
    case "Greece":
      return "üá¨üá∑";
    case "Iceland":
      return "üáÆüá∏";
    case "India":
      return "üáÆüá≥";
    case "Mexico":
      return "üá≤üáΩ";
    case "Panama":
      return "üáµüá¶";
    case "Dominican%20Republic":
      return "üá©üá¥";
    case "Singapore":
      return "üá∏üá¨";
    case "Peru":
      return "üáµüá™";
    case "Argentina":
      return "üá¶üá∑";
    case "Croatia":
      return "üá≠üá∑";
    case "Serbia":
      return "üá∑üá∏";
    case "Slovenia":
      return "üá∏üáÆ";
    case "Estonia":
      return "üá™üá™";
    case "Diamond%20Princess":
      return "üö¢";
    case "Colombia":
      return "üá®üá¥";
    case "Qatar":
      return "üá∂üá¶";
    case "Hong%20Kong":
      return "üá≠üá∞";
    case "UAE":
      return "üá¶üá™";
    case "Egypt":
      return "üá™üá¨";
    case "New%20Zealand":
      return "üá≥üáø";
    case "Algeria":
      return "üá©üáø";
    case "Iraq":
      return "üáÆüá∂";
    case "Morocco":
      return "üá≤üá¶";
    case "Bahrain":
      return "üáßüá≠";
    case "Lithuania":
      return "üá±üáπ";
    case "Armenia":
      return "üá¶üá≤";
    case "Ukraine":
      return "üá∫üá¶";
    case "Hungary":
      return "üá≠üá∫";
    case "Lebanon":
      return "üá±üáß";
    case "Latvia":
      return "üá±üáª";
    case "Bosnia%20and%20Herzegovina":
      return "üáßüá¶";
    case "Slovakia":
      return "üá∏üá∞";
    case "Andorra":
      return "üá¶üá©";
    case "Costa%20Rica":
      return "üá®üá∑";
    case "Tunisia":
      return "üáπüá≥";
    case "Uruguay":
      return "üá∫üáæ";
    case "Taiwan":
      return "üáπüáº";
    case "Kazakhstan":
      return "üá∞üáø";
    case "North%20Macedonia":
      return "üá≤üá∞";
    case "Azerbaijan":
      return "üá¶üáø";
    case "Kuwait":
      return "üá∞üáº";
    case "Jordan":
      return "üáØüá¥";
    case "San%20Marino":
      return "üá∏üá≤";
    case "Cyprus":
      return "üá®üáæ";
    case "R√©union":
      return "üá∑üá™";
    case "Albania":
      return "üá¶üá±";
    case "Burkina%20Faso":
      return "üáßüá´";
    case "Vietnam":
      return "üáªüá≥";
    case "Oman":
      return "üá¥üá≤";
    case "Afghanistan":
      return "üá¶üá´";
    case "Cuba":
      return "üá®üá∫";
    case "Faeroe%20Islands":
      return "üá´üá¥";
    case "Faroe%20Islands":
      return "üá´üá¥";
    case "Ivory%20Coast":
      return "üá®üáÆ";
    case "Senegal":
      return "üá∏üá≥";
    case "Malta":
      return "üá≤üáπ";
    case "Ghana":
      return "üá¨üá≠";
    case "Belarus":
      return "üáßüáæ";
    case "Uzbekistan":
      return "üá∫üáø";
    case "Channel%20Islands":
      return "&nbsp;&nbsp;&nbsp;&thinsp;";
    case "Cameroon":
      return "üá®üá≤";
    case "Honduras":
      return "üá≠üá≥";
    case "Venezuela":
      return "üáªüá™";
    case "Mauritius":
      return "üá≤üá∫";
    case "Brunei":
      return "üáßüá≥";
    case "Sri%20Lanka":
      return "üá±üá∞";
    case "Palestine":
      return "üáµüá∏";
    case "Nigeria":
      return "üá≥üá¨";
    case "Cambodia":
      return "üá∞üá≠";
    case "Guadeloupe":
      return "üá¨üáµ";
    case "Georgia":
      return "üá¨üá™";
    case "Bolivia":
      return "üáßüá¥";
    case "Kyrgyzstan":
      return "üá∞üá¨";
    case "Martinique":
      return "üá≤üá∂";
    case "Montenegro":
      return "üá≤üá™";
    case "Trinidad%and%Tobago":
      return "üáπüáπ";
    case "Mayotte":
      return "üáæüáπ";
    case "DRC":
      return "üá®üá©";
    case "Rwanda":
      return "üá∑üáº";
    case "Gibraltar":
      return "üá¨üáÆ";
    case "Paraguay":
      return "üáµüáæ";
    case "Liechtenstein":
      return "üá±üáÆ";
    case "Kenya":
      return "üá∞üá™";
    case "Aruba":
      return "üá¶üáº";
    case "Bangladesh":
      return "üáßüá©";
    case "Isle%20of%20Man":
      return "üáÆüá≤";
    case "Monaco":
      return "üá≤üá®";
    case "French%20Guiana":
      return "üá¨üá´";
    case "Madagascar":
      return "üá≤üá¨";
    case "Macao":
      return "üá≤üá¥";
    case "Guatemala":
      return "üá¨üáπ";
    case "Jamaica":
      return "üáØüá≤";
    case "French%20Polynesia":
      return "üáµüá´";
    case "Zambia":
      return "üáøüá≤";
    case "Barbados":
      return "üáßüáß";
    case "Uganda":
      return "üá∫üá¨";
    case "Togo":
      return "üáπüá¨";
    case "El%20Salvador":
      return "üá∏üáª";
    case "Mali":
      return "üá≤üá±";
    case "Ethiopia":
      return "üá™üáπ";
    case "Niger":
      return "üá≥üá™";
    case "Bermuda":
      return "üáßüá≤";
    case "Guinea":
      return "üá¨üá≥";
    case "Congo":
      return "üá®üá¨";
    case "Tanzania":
      return "üáπüáø";
    case "Djibouti":
      return "üá©üáØ";
    case "Maldives":
      return "üá≤üáª";
    case "Saint%20Martin":
      return "üá≤üá´";
    case "Haiti":
      return "üá≠üáπ";
    case "New%20Caledonia":
      return "üá≥üá®";
    case "Bahamas":
      return "üáßüá∏";
    case "Myanmar":
      return "üá≤üá≤";
    case "Cayman%20Islands":
      return "üá∞üáæ";
    case "Equatorial%20Guinea":
      return "üá¨üá∂";
    case "Eritrea":
      return "üá™üá∑";
    case "Mongolia":
      return "üá≤üá≥";
    case "Cura√ßao":
      return "üá®üáº";
    case "Dominica":
      return "üá©üá≤";
    case "Namibia":
      return "üá≥üá¶";
    case "Greenland":
      return "üá¨üá±";
    case "Syria":
      return "üá∏üáæ";
    case "Grenada":
      return "üá¨üá©";
    case "Saint%20Lucia":
      return "üá±üá®";
    case "Eswatini":
      return "üá∏üáø";
    case "Guyana":
      return "üá¨üáæ";
    case "Guinea-Bissau":
      return "üá¨üáº";
    case "Laos":
      return "üá±üá¶";
    case "Libya":
      return "üá±üáæ";
    case "Mozambique":
      return "üá≤üáø";
    case "Seychelles":
      return "üá∏üá®";
    case "Suriname":
      return "üá∏üá∑";
    case "Angola":
      return "üá¶üá¥";
    case "Gabon":
      return "üá¨üá¶";
    case "Zimbabwe":
      return "üáøüáº";
    case "Antigua%20and%20Barbuda":
      return "üá¶üá¨";
    case "Saint%20Kitts%20and%20Nevis":
      return "üá∞üá≥";
    case "Sudan":
      return "üá∏üá©";
    case "Cabo%20Verde":
      return "üá®üáª";
    case "Cape%20Verde":
      return "üá®üáª";
    case "Benin":
      return "üáßüáØ";
    case "Vatican%20City":
      return "üáªüá¶";
    case "St.%20Barth":
      return "üáßüá±";
    case "Sint%20Maarten":
      return "üá∏üáΩ";
    case "Nepal":
      return "üá≥üáµ";
    case "Chad":
      return "üáπüá©";
    case "Fiji":
      return "üá´üáØ";
    case "Mauritania":
      return "üá≤üá∑";
    case "Montserrat":
      return "üá≤üá∏";
    case "Turks%20and%20Caicos":
      return "üáπüá®";
    case "Gambia":
      return "üá¨üá≤";
    case "Nicaragua":
      return "üá≥üáÆ";
    case "Bhutan":
      return "üáßüáπ";
    case "Belize":
      return "üáßüáø";
    case "CAR":
      return "üá®üá´";
    case "Liberia":
      return "üá±üá∑";
    case "Somalia":
      return "üá∏üá¥";
    case "MS%20Zaandam":
      return "üö¢";
    case "Anguilla":
      return "üá¶üáÆ";
    case "British%20Virgin%20Islands":
      return "üáªüá¨";
    case "Papua%20New%20Guinea":
      return "üáµüá¨";
    case "St.%20Vincent%20Grenadines":
      return "üáªüá®";
    case "Timor-Leste":
      return "üáπüá±";
    case "Botswana":
      return "üáßüáº";
  }
  return "&nbsp;&nbsp;&nbsp;&thinsp;";
}


var isoCountries = {
    'AF' : 'Afghanistan',
    'AX' : 'Aland Islands',
    'AL' : 'Albania',
    'DZ' : 'Algeria',
    'AS' : 'American Samoa',
    'AD' : 'Andorra',
    'AO' : 'Angola',
    'AI' : 'Anguilla',
    'AQ' : 'Antarctica',
    'AG' : 'Antigua And Barbuda',
    'AR' : 'Argentina',
    'AM' : 'Armenia',
    'AW' : 'Aruba',
    'AU' : 'Australia',
    'AT' : 'Austria',
    'AZ' : 'Azerbaijan',
    'BS' : 'Bahamas',
    'BH' : 'Bahrain',
    'BD' : 'Bangladesh',
    'BB' : 'Barbados',
    'BY' : 'Belarus',
    'BE' : 'Belgium',
    'BZ' : 'Belize',
    'BJ' : 'Benin',
    'BM' : 'Bermuda',
    'BT' : 'Bhutan',
    'BO' : 'Bolivia',
    'BA' : 'Bosnia And Herzegovina',
    'BW' : 'Botswana',
    'BV' : 'Bouvet Island',
    'BR' : 'Brazil',
    'IO' : 'British Indian Ocean Territory',
    'BN' : 'Brunei Darussalam',
    'BG' : 'Bulgaria',
    'BF' : 'Burkina Faso',
    'BI' : 'Burundi',
    'KH' : 'Cambodia',
    'CM' : 'Cameroon',
    'CA' : 'Canada',
    'CV' : 'Cape Verde',
    'KY' : 'Cayman Islands',
    'CF' : 'Central African Republic',
    'TD' : 'Chad',
    'CL' : 'Chile',
    'CN' : 'China',
    'CX' : 'Christmas Island',
    'CC' : 'Cocos (Keeling) Islands',
    'CO' : 'Colombia',
    'KM' : 'Comoros',
    'CG' : 'Congo',
    'CD' : 'Congo, Democratic Republic',
    'CK' : 'Cook Islands',
    'CR' : 'Costa Rica',
    'CI' : 'Cote D\'Ivoire',
    'HR' : 'Croatia',
    'CU' : 'Cuba',
    'CY' : 'Cyprus',
    'CZ' : 'Czech Republic',
    'DK' : 'Denmark',
    'DJ' : 'Djibouti',
    'DM' : 'Dominica',
    'DO' : 'Dominican Republic',
    'EC' : 'Ecuador',
    'EG' : 'Egypt',
    'SV' : 'El Salvador',
    'GQ' : 'Equatorial Guinea',
    'ER' : 'Eritrea',
    'EE' : 'Estonia',
    'ET' : 'Ethiopia',
    'FK' : 'Falkland Islands (Malvinas)',
    'FO' : 'Faroe Islands',
    'FJ' : 'Fiji',
    'FI' : 'Finland',
    'FR' : 'France',
    'GF' : 'French Guiana',
    'PF' : 'French Polynesia',
    'TF' : 'French Southern Territories',
    'GA' : 'Gabon',
    'GM' : 'Gambia',
    'GE' : 'Georgia',
    'DE' : 'Germany',
    'GH' : 'Ghana',
    'GI' : 'Gibraltar',
    'GR' : 'Greece',
    'GL' : 'Greenland',
    'GD' : 'Grenada',
    'GP' : 'Guadeloupe',
    'GU' : 'Guam',
    'GT' : 'Guatemala',
    'GG' : 'Guernsey',
    'GN' : 'Guinea',
    'GW' : 'Guinea-Bissau',
    'GY' : 'Guyana',
    'HT' : 'Haiti',
    'HM' : 'Heard Island & Mcdonald Islands',
    'VA' : 'Holy See (Vatican City State)',
    'HN' : 'Honduras',
    'HK' : 'Hong Kong',
    'HU' : 'Hungary',
    'IS' : 'Iceland',
    'IN' : 'India',
    'ID' : 'Indonesia',
    'IR' : 'Iran, Islamic Republic Of',
    'IQ' : 'Iraq',
    'IE' : 'Ireland',
    'IM' : 'Isle Of Man',
    'IL' : 'Israel',
    'IT' : 'Italy',
    'JM' : 'Jamaica',
    'JP' : 'Japan',
    'JE' : 'Jersey',
    'JO' : 'Jordan',
    'KZ' : 'Kazakhstan',
    'KE' : 'Kenya',
    'KI' : 'Kiribati',
    'KR' : 'Korea',
    'KW' : 'Kuwait',
    'KG' : 'Kyrgyzstan',
    'LA' : 'Lao People\'s Democratic Republic',
    'LV' : 'Latvia',
    'LB' : 'Lebanon',
    'LS' : 'Lesotho',
    'LR' : 'Liberia',
    'LY' : 'Libyan Arab Jamahiriya',
    'LI' : 'Liechtenstein',
    'LT' : 'Lithuania',
    'LU' : 'Luxembourg',
    'MO' : 'Macao',
    'MK' : 'Macedonia',
    'MG' : 'Madagascar',
    'MW' : 'Malawi',
    'MY' : 'Malaysia',
    'MV' : 'Maldives',
    'ML' : 'Mali',
    'MT' : 'Malta',
    'MH' : 'Marshall Islands',
    'MQ' : 'Martinique',
    'MR' : 'Mauritania',
    'MU' : 'Mauritius',
    'YT' : 'Mayotte',
    'MX' : 'Mexico',
    'FM' : 'Micronesia, Federated States Of',
    'MD' : 'Moldova',
    'MC' : 'Monaco',
    'MN' : 'Mongolia',
    'ME' : 'Montenegro',
    'MS' : 'Montserrat',
    'MA' : 'Morocco',
    'MZ' : 'Mozambique',
    'MM' : 'Myanmar',
    'NA' : 'Namibia',
    'NR' : 'Nauru',
    'NP' : 'Nepal',
    'NL' : 'Netherlands',
    'AN' : 'Netherlands Antilles',
    'NC' : 'New Caledonia',
    'NZ' : 'New Zealand',
    'NI' : 'Nicaragua',
    'NE' : 'Niger',
    'NG' : 'Nigeria',
    'NU' : 'Niue',
    'NF' : 'Norfolk Island',
    'MP' : 'Northern Mariana Islands',
    'NO' : 'Norway',
    'OM' : 'Oman',
    'PK' : 'Pakistan',
    'PW' : 'Palau',
    'PS' : 'Palestinian Territory, Occupied',
    'PA' : 'Panama',
    'PG' : 'Papua New Guinea',
    'PY' : 'Paraguay',
    'PE' : 'Peru',
    'PH' : 'Philippines',
    'PN' : 'Pitcairn',
    'PL' : 'Poland',
    'PT' : 'Portugal',
    'PR' : 'Puerto Rico',
    'QA' : 'Qatar',
    'RE' : 'R√©union',
    'RO' : 'Romania',
    'RU' : 'Russian Federation',
    'RW' : 'Rwanda',
    'BL' : 'Saint Barthelemy',
    'SH' : 'Saint Helena',
    'KN' : 'Saint Kitts And Nevis',
    'LC' : 'Saint Lucia',
    'MF' : 'Saint Martin',
    'PM' : 'Saint Pierre And Miquelon',
    'VC' : 'Saint Vincent And Grenadines',
    'WS' : 'Samoa',
    'SM' : 'San Marino',
    'ST' : 'Sao Tome And Principe',
    'SA' : 'Saudi Arabia',
    'SN' : 'Senegal',
    'RS' : 'Serbia',
    'SC' : 'Seychelles',
    'SL' : 'Sierra Leone',
    'SG' : 'Singapore',
    'SK' : 'Slovakia',
    'SI' : 'Slovenia',
    'SB' : 'Solomon Islands',
    'SO' : 'Somalia',
    'ZA' : 'South Africa',
    'GS' : 'South Georgia And Sandwich Isl.',
    'ES' : 'Spain',
    'LK' : 'Sri Lanka',
    'SD' : 'Sudan',
    'SR' : 'Suriname',
    'SJ' : 'Svalbard And Jan Mayen',
    'SZ' : 'Swaziland',
    'SE' : 'Sweden',
    'CH' : 'Switzerland',
    'SY' : 'Syrian Arab Republic',
    'TW' : 'Taiwan',
    'TJ' : 'Tajikistan',
    'TZ' : 'Tanzania',
    'TH' : 'Thailand',
    'TL' : 'Timor-Leste',
    'TG' : 'Togo',
    'TK' : 'Tokelau',
    'TO' : 'Tonga',
    'TT' : 'Trinidad And Tobago',
    'TN' : 'Tunisia',
    'TR' : 'Turkey',
    'TM' : 'Turkmenistan',
    'TC' : 'Turks And Caicos Islands',
    'TV' : 'Tuvalu',
    'UG' : 'Uganda',
    'UA' : 'Ukraine',
    'AE' : 'United Arab Emirates',
    'GB' : 'United Kingdom',
    'US' : 'United States',
    'UM' : 'United States Outlying Islands',
    'UY' : 'Uruguay',
    'UZ' : 'Uzbekistan',
    'VU' : 'Vanuatu',
    'VE' : 'Venezuela',
    'VN' : 'Viet Nam',
    'VG' : 'Virgin Islands, British',
    'VI' : 'Virgin Islands, U.S.',
    'WF' : 'Wallis And Futuna',
    'EH' : 'Western Sahara',
    'YE' : 'Yemen',
    'ZM' : 'Zambia',
    'ZW' : 'Zimbabwe'
};

function getCountryName(countryCode) {
    if (isoCountries.hasOwnProperty(countryCode)) {
        return isoCountries[countryCode];
    } else {
        return countryCode;
    }
}