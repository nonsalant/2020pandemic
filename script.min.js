let links=document.links;for(let e=0,r=links.length;e<r;e++)links[e].hostname!=window.location.hostname&&(links[e].target="_blank",links[e].rel="noopener");function render_stuff(){render_hero(),render_blocks()}function toggle_auto_refresh(e){e?(auto_refresh=setInterval(render_stuff,3e3),document.querySelectorAll(".legend")[0].style.backgroundColor="#F3F3B6",document.querySelector("#Global")&&(document.querySelector("#Global").style.backgroundColor="hsla(60, 60%, 85%, 0.53)")):(clearInterval(auto_refresh),document.querySelectorAll(".legend")[0].style.backgroundColor="rgba(245, 245, 245, 1)",document.querySelector("#Global")&&(document.querySelector("#Global").style.backgroundColor="hsla(60, 0%, 95%, 0.53)"))}function render_hero(){fetch("https://coronavirus-19-api.herokuapp.com/all/").then(e=>e.json()).then(e=>{let r=100*((Number(e.recovered.toFixed(0))+Number(e.deaths.toFixed(0)))/Number(e.cases.toFixed(0))).toFixed(2),a=100-r;document.getElementById("hero").innerHTML=`\n      <div class="percentage-bar" style="width:${r}%;">\n        ${r}%\n      </div>\n      <small class="percentage-empty">\n          ${a}% ü¶† ACTIVE CASES\n      </small>\n\n      <style>\n      #virus:before {\n        /* Grab Google image graph (pie chart) */\n        background: url("https://chart.googleapis.com/chart?cht=p&chd=t:${r},${a}&chs=200x200&chco=DCD3C0,ffefcc") center center no-repeat;\n        background-size: contain;\n        opacity: .90;\n        content: "";\n        position: absolute;\n        width: 1.5em;\n        height: 1.5em;\n        border-radius: 100%; border:0; padding:0;\n        display: block;\n      }\n      </style>\n      `})}function render_blocks(){let e=document.getElementsByClassName("block");for(let r=0;r<e.length;r++){render(e[r].id),e[r].id}}function render(e){if(!e)return;let r="";r="Global"===e?"https://coronavirus-19-api.herokuapp.com/all/":"https://coronavirus-19-api.herokuapp.com/countries/"+e,fetch(r).then(e=>e.json()).then(r=>{let a=Number(r.recovered.toFixed(0)),n=Number(r.deaths.toFixed(0)),t=Number(r.cases.toFixed(0)),s=((a+n)/t).toFixed(2);document.getElementById(e).innerHTML=`\n      <div class="block-data">\n          <button class="close" onclick="remove_country(this)" style="display:none;">\n            ‚ùå\n          </button>\n          <button class="country-name has-tooltip-bottom" \n          data-tooltip="Cases per 1 million: ${r.casesPerOneMillion} \n  Deaths per 1 million: ${r.deathsPerOneMillion}"\n          >\n            ${unescape(e)}:\n          </button>&nbsp;\n          ( \n          <button \n          data-tooltip="Tests per 1 million: ${r.testsPerOneMillion}"\n         class="recovered has-tooltip-bottom" style="color:green">${a}</button>\n          +\n          <button \n          data-tooltip="Deaths today: ${r.todayDeaths}"\n          class="deaths has-tooltip-bottom">${n}</button> ) \n          /\n          <button \n          data-tooltip="Cases today: ${r.todayDeaths}"\n          class="cases has-tooltip-bottom" style="color:red">${t}</button> \n          = \n          <b class="c-ratio ${function(e){let r="gray";return Number(e)<.1&&(r="red"),Number(e)>.3&&(r="green"),r}(s)}">\n            ${s}\n          </b>\n          <span class="flag" style="width:1em; text-align:center;">\n            ${flag_emoji(e)}\n          </span>\n      </div> \x3c!-- /.block-data --\x3e\n      `}).then(()=>{sortList()})}function sortList(e=".cases",r=!1){let a,n,t,s;for(n=!0,r&&stop_auto_refresh();n;){for(n=!1,t=document.querySelectorAll(".country-stats .block:not(#Global)"),a=0;a<t.length-1;a++)if(s=!1,t[a].querySelector(e)&&t[a+1].querySelector(e)&&Number(t[a].querySelector(e).innerHTML)<Number(t[a+1].querySelector(e).innerHTML)){s=!0;break}s&&(t[a].parentNode.insertBefore(t[a+1],t[a]),n=!0)}}function stop_auto_refresh(){document.getElementById("autorefresh").checked&&(document.getElementById("autorefresh").checked=!1,toggle_auto_refresh(!1))}function toggle_close_buttons(e){let r=document.querySelectorAll(".close");if(r)if(void 0!==r[0]&&null!=r){if("none"==r[0].style.display){stop_auto_refresh(),e.innerHTML="&nbsp;&nbsp;&nbsp;Done deleting.&nbsp;&nbsp;";for(let e=0;e<r.length;e++)r[e].style.display="block"}else if("block"==r[0].style.display){e.innerHTML="Delete countries‚Ä¶";for(let e=0;e<r.length;e++)r[e].style.display="none"}}else e.innerHTML="Delete countries‚Ä¶"}function localStorageInit(){let e=localStorage.getItem("pandemicSavedCountries");if(e&&"{}"!==e){let r=e.split(","),a="";for(let e=0;e<r.length;e++)a+=`\n      <div id="${r[e]}" class="block"></div>\n      `;document.querySelector(".country-stats").innerHTML=a}else{let e=document.querySelectorAll(".country-stats .block"),r="";for(let a=0;a<e.length;a++)r+=e[a].id,a<e.length-1&&e[a].id&&""!==e[a].id&&(r+=",");localStorage.setItem("pandemicSavedCountries",r)}}function remove_all_countries(){document.querySelector(".country-stats").innerHTML="",localStorage.setItem("pandemicSavedCountries","")}function add_all_countries(){let e=document.querySelectorAll("#country-list option");remove_all_countries();for(let r=0;r<e.length;r++){let a=e[r].value;(a=a.split(" ")).shift(),(a=a.join(" "))&&!document.getElementById(escape(a))?(console.log(a+" added."),add_country(a,!1)):document.getElementById(escape(a))&&alert(a+" is already shown.")}}function remove_country(e){e.parentNode.parentNode.remove(),console.log(unescape(e.parentNode.id)+" removed.");let r=localStorage.getItem("pandemicSavedCountries").split(",");for(let a=0;a<r.length;a++)r[a]==e.parentNode.id&&r.splice(a,1);localStorage.setItem("pandemicSavedCountries",r.join())}function add_country(e){document.querySelector(".country-stats").innerHTML+=`\n    <div id="${escape(e)}" class="block"></div>\n  `,render(escape(e));let r=[];if(null===localStorage.getItem("pandemicSavedCountries"))r=[e=escape(e)];else{(r=localStorage.getItem("pandemicSavedCountries").split(",")).push(escape(e))}localStorage.setItem("pandemicSavedCountries",r.join())}function flag_emoji(e){switch(e){case"Romania":return"üá∑üá¥";case"USA":return"üá∫üá∏";case"Global":return"üåé";case"China":return"üá®üá≥";case"Italy":return"üáÆüáπ";case"Spain":return"üá™üá∏";case"S.%20Korea":return"üá∞üá∑";case"Moldova":return"üá≤üá©";case"Bulgaria":return"üáßüá¨";case"Switzerland":return"üá®üá≠";case"UK":return"üá¨üáß";case"Iran":return"üáÆüá∑";case"France":return"üá´üá∑";case"Germany":return"üá©üá™";case"Japan":return"üáØüáµ";case"Belgium":return"üáßüá™";case"Netherlands":return"üá≥üá±";case"Turkey":return"üáπüá∑";case"Austria":return"üá¶üáπ";case"Canada":return"üá®üá¶";case"Portugal":return"üáµüáπ";case"Norway":return"üá≥üá¥";case"Brazil":return"üáßüá∑";case"Israel":return"üáÆüá±";case"Australia":return"üá¶üá∫";case"Sweden":return"üá∏üá™";case"Czechia":return"üá®üáø";case"Malaysia":return"üá≤üáæ";case"Ireland":return"üáÆüá™";case"Denmark":return"üá©üá∞";case"Chile":return"üá®üá±";case"Luxembourg":return"üá±üá∫";case"Poland":return"üáµüá±";case"Ecuador":return"üá™üá®";case"Russia":return"üá∑üá∫";case"Pakistan":return"üáµüá∞";case"Philippines":return"üáµüá≠";case"Thailand":return"üáπüá≠";case"Saudi%20Arabia":return"üá∏üá¶";case"Indonesia":return"üáÆüá©";case"Finland":return"üá´üáÆ";case"South%20Africa":return"üáøüá¶";case"Greece":return"üá¨üá∑";case"Iceland":return"üáÆüá∏";case"India":return"üáÆüá≥";case"Mexico":return"üá≤üáΩ";case"Panama":return"üáµüá¶";case"Dominican%20Republic":return"üá©üá¥";case"Singapore":return"üá∏üá¨";case"Peru":return"üáµüá™";case"Argentina":return"üá¶üá∑";case"Croatia":return"üá≠üá∑";case"Serbia":return"üá∑üá∏";case"Slovenia":return"üá∏üáÆ";case"Estonia":return"üá™üá™";case"Diamond%20Princess":return"üö¢";case"Colombia":return"üá®üá¥";case"Qatar":return"üá∂üá¶";case"Hong%20Kong":return"üá≠üá∞";case"UAE":return"üá¶üá™";case"Egypt":return"üá™üá¨";case"New%20Zealand":return"üá≥üáø";case"Algeria":return"üá©üáø";case"Iraq":return"üáÆüá∂";case"Morocco":return"üá≤üá¶";case"Bahrain":return"üáßüá≠";case"Lithuania":return"üá±üáπ";case"Armenia":return"üá¶üá≤";case"Ukraine":return"üá∫üá¶";case"Hungary":return"üá≠üá∫";case"Lebanon":return"üá±üáß";case"Latvia":return"üá±üáª";case"Bosnia%20and%20Herzegovina":return"üáßüá¶";case"Slovakia":return"üá∏üá∞";case"Andorra":return"üá¶üá©";case"Costa%20Rica":return"üá®üá∑";case"Tunisia":return"üáπüá≥";case"Uruguay":return"üá∫üáæ";case"Taiwan":return"üáπüáº";case"Kazakhstan":return"üá∞üáø";case"North%20Macedonia":return"üá≤üá∞";case"Azerbaijan":return"üá¶üáø";case"Kuwait":return"üá∞üáº";case"Jordan":return"üáØüá¥";case"San%20Marino":return"üá∏üá≤";case"Cyprus":return"üá®üáæ";case"R√©union":return"üá∑üá™";case"Albania":return"üá¶üá±";case"Burkina%20Faso":return"üáßüá´";case"Vietnam":return"üáªüá≥";case"Oman":return"üá¥üá≤";case"Afghanistan":return"üá¶üá´";case"Cuba":return"üá®üá∫";case"Faeroe%20Islands":case"Faroe%20Islands":return"üá´üá¥";case"Ivory%20Coast":return"üá®üáÆ";case"Senegal":return"üá∏üá≥";case"Malta":return"üá≤üáπ";case"Ghana":return"üá¨üá≠";case"Belarus":return"üáßüáæ";case"Uzbekistan":return"üá∫üáø";case"Channel%20Islands":return"&nbsp;&nbsp;&nbsp;&thinsp;";case"Cameroon":return"üá®üá≤";case"Honduras":return"üá≠üá≥";case"Venezuela":return"üáªüá™";case"Mauritius":return"üá≤üá∫";case"Brunei":return"üáßüá≥";case"Sri%20Lanka":return"üá±üá∞";case"Palestine":return"üáµüá∏";case"Nigeria":return"üá≥üá¨";case"Cambodia":return"üá∞üá≠";case"Guadeloupe":return"üá¨üáµ";case"Georgia":return"üá¨üá™";case"Bolivia":return"üáßüá¥";case"Kyrgyzstan":return"üá∞üá¨";case"Martinique":return"üá≤üá∂";case"Montenegro":return"üá≤üá™";case"Trinidad%and%Tobago":return"üáπüáπ";case"Mayotte":return"üáæüáπ";case"DRC":return"üá®üá©";case"Rwanda":return"üá∑üáº";case"Gibraltar":return"üá¨üáÆ";case"Paraguay":return"üáµüáæ";case"Liechtenstein":return"üá±üáÆ";case"Kenya":return"üá∞üá™";case"Aruba":return"üá¶üáº";case"Bangladesh":return"üáßüá©";case"Isle%20of%20Man":return"üáÆüá≤";case"Monaco":return"üá≤üá®";case"French%20Guiana":return"üá¨üá´";case"Madagascar":return"üá≤üá¨";case"Macao":return"üá≤üá¥";case"Guatemala":return"üá¨üáπ";case"Jamaica":return"üáØüá≤";case"French%20Polynesia":return"üáµüá´";case"Zambia":return"üáøüá≤";case"Barbados":return"üáßüáß";case"Uganda":return"üá∫üá¨";case"Togo":return"üáπüá¨";case"El%20Salvador":return"üá∏üáª";case"Mali":return"üá≤üá±";case"Ethiopia":return"üá™üáπ";case"Niger":return"üá≥üá™";case"Bermuda":return"üáßüá≤";case"Guinea":return"üá¨üá≥";case"Congo":return"üá®üá¨";case"Tanzania":return"üáπüáø";case"Djibouti":return"üá©üáØ";case"Maldives":return"üá≤üáª";case"Saint%20Martin":return"üá≤üá´";case"Haiti":return"üá≠üáπ";case"New%20Caledonia":return"üá≥üá®";case"Bahamas":return"üáßüá∏";case"Myanmar":return"üá≤üá≤";case"Cayman%20Islands":return"üá∞üáæ";case"Equatorial%20Guinea":return"üá¨üá∂";case"Eritrea":return"üá™üá∑";case"Mongolia":return"üá≤üá≥";case"Cura√ßao":return"üá®üáº";case"Dominica":return"üá©üá≤";case"Namibia":return"üá≥üá¶";case"Greenland":return"üá¨üá±";case"Syria":return"üá∏üáæ";case"Grenada":return"üá¨üá©";case"Saint%20Lucia":return"üá±üá®";case"Eswatini":return"üá∏üáø";case"Guyana":return"üá¨üáæ";case"Guinea-Bissau":return"üá¨üáº";case"Laos":return"üá±üá¶";case"Libya":return"üá±üáæ";case"Mozambique":return"üá≤üáø";case"Seychelles":return"üá∏üá®";case"Suriname":return"üá∏üá∑";case"Angola":return"üá¶üá¥";case"Gabon":return"üá¨üá¶";case"Zimbabwe":return"üáøüáº";case"Antigua%20and%20Barbuda":return"üá¶üá¨";case"Saint%20Kitts%20and%20Nevis":return"üá∞üá≥";case"Sudan":return"üá∏üá©";case"Cabo%20Verde":case"Cape%20Verde":return"üá®üáª";case"Benin":return"üáßüáØ";case"Vatican%20City":return"üáªüá¶";case"St.%20Barth":return"üáßüá±";case"Sint%20Maarten":return"üá∏üáΩ";case"Nepal":return"üá≥üáµ";case"Chad":return"üáπüá©";case"Fiji":return"üá´üáØ";case"Mauritania":return"üá≤üá∑";case"Montserrat":return"üá≤üá∏";case"Turks%20and%20Caicos":return"üáπüá®";case"Gambia":return"üá¨üá≤";case"Nicaragua":return"üá≥üáÆ";case"Bhutan":return"üáßüáπ";case"Belize":return"üáßüáø";case"CAR":return"üá®üá´";case"Liberia":return"üá±üá∑";case"Somalia":return"üá∏üá¥";case"MS%20Zaandam":return"üö¢";case"Anguilla":return"üá¶üáÆ";case"British%20Virgin%20Islands":return"üáªüá¨";case"Papua%20New%20Guinea":return"üáµüá¨";case"St.%20Vincent%20Grenadines":return"üáªüá®";case"Timor-Leste":return"üáπüá±";case"Botswana":return"üáßüáº"}return"&nbsp;&nbsp;&nbsp;&thinsp;"}localStorageInit(),render_stuff(),document.querySelector("#country-list-choice").addEventListener("change",e=>{let r=document.getElementById("country-list-choice").value;(r=r.split(" ")).shift(),(r=r.join(" "))&&!document.getElementById(escape(r))?(console.log(r+" added."),add_country(r)):document.getElementById(escape(r))&&alert(r+" is already shown."),document.getElementById("country-list-choice").value=""});
