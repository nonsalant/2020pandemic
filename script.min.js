let links=document.links;for(let e=0,r=links.length;e<r;e++)links[e].hostname!=window.location.hostname&&(links[e].target="_blank",links[e].rel="noopener");function render_stuff(){render_hero(),render_blocks()}function toggle_auto_refresh(e){e?(auto_refresh=setInterval(render_stuff,3e3),document.querySelectorAll(".legend")[0].style.backgroundColor="#F3F3B6",document.querySelector("#Global")&&(document.querySelector("#Global").style.backgroundColor="hsla(60, 60%, 85%, 0.53)")):(clearInterval(auto_refresh),document.querySelectorAll(".legend")[0].style.backgroundColor="rgba(245, 245, 245, 1)",document.querySelector("#Global")&&(document.querySelector("#Global").style.backgroundColor="hsla(60, 0%, 95%, 0.53)"))}function render_hero(){fetch("https://coronavirus-19-api.herokuapp.com/all/").then(e=>e.json()).then(e=>{let r=100*((Number(e.recovered.toFixed(0))+Number(e.deaths.toFixed(0)))/Number(e.cases.toFixed(0))).toFixed(2),a=100-r;document.getElementById("hero").innerHTML=`\n      <div class="percentage-bar" style="width:${r}%;">\n        ${r}%\n      </div>\n      <small class="percentage-empty">\n          ${a}% 🦠 ACTIVE CASES\n      </small>\n\n      <style>\n      #virus:before {\n        /* Grab Google image graph (pie chart) */\n        background: url("https://chart.googleapis.com/chart?cht=p&chd=t:${r},${a}&chs=200x200&chco=DCD3C0,ffefcc") center center no-repeat;\n        background-size: contain;\n        opacity: .90;\n        content: "";\n        position: absolute;\n        width: 1.5em;\n        height: 1.5em;\n        border-radius: 100%; border:0; padding:0;\n        display: block;\n      }\n      </style>\n      `})}function render_blocks(){let e=document.getElementsByClassName("block");for(let r=0;r<e.length;r++){render(e[r].id),e[r].id}}function render(e){if(!e)return;let r="";r="Global"===e?"https://coronavirus-19-api.herokuapp.com/all/":"https://coronavirus-19-api.herokuapp.com/countries/"+e,fetch(r).then(e=>e.json()).then(r=>{let a=Number(r.recovered.toFixed(0)),n=Number(r.deaths.toFixed(0)),t=Number(r.cases.toFixed(0)),s=((a+n)/t).toFixed(2);document.getElementById(e).innerHTML=`\n      <div class="block-data">\n          <button class="close" onclick="remove_country(this)" style="display:none;">\n            ❌\n          </button>\n          <button class="country-name has-tooltip-bottom" \n          data-tooltip="Cases per 1 million: ${r.casesPerOneMillion} \n  Deaths per 1 million: ${r.deathsPerOneMillion}"\n          >\n            ${unescape(e)}:\n          </button>&nbsp;\n          ( \n          <button \n          data-tooltip="Tests per 1 million: ${r.testsPerOneMillion}"\n         class="recovered has-tooltip-bottom" style="color:green">${a}</button>\n          +\n          <button \n          data-tooltip="Deaths today: ${r.todayDeaths}"\n          class="deaths has-tooltip-bottom">${n}</button> ) \n          /\n          <button \n          data-tooltip="Cases today: ${r.todayDeaths}"\n          class="cases has-tooltip-bottom" style="color:red">${t}</button> \n          = \n          <b class="c-ratio ${function(e){let r="gray";return Number(e)<.1&&(r="red"),Number(e)>.3&&(r="green"),r}(s)}">\n            ${s}\n          </b>\n          <span class="flag" style="width:1em; text-align:center;">\n            ${flag_emoji(e)}\n          </span>\n      </div> \x3c!-- /.block-data --\x3e\n      `}).then(()=>{sortList()})}function sortList(e=".cases",r=!1){let a,n,t,s;for(n=!0,r&&stop_auto_refresh();n;){for(n=!1,t=document.querySelectorAll(".country-stats .block:not(#Global)"),a=0;a<t.length-1;a++)if(s=!1,t[a].querySelector(e)&&t[a+1].querySelector(e)&&Number(t[a].querySelector(e).innerHTML)<Number(t[a+1].querySelector(e).innerHTML)){s=!0;break}s&&(t[a].parentNode.insertBefore(t[a+1],t[a]),n=!0)}}function stop_auto_refresh(){document.getElementById("autorefresh").checked&&(document.getElementById("autorefresh").checked=!1,toggle_auto_refresh(!1))}function toggle_close_buttons(e){let r=document.querySelectorAll(".close");if(r)if(void 0!==r[0]&&null!=r){if("none"==r[0].style.display){stop_auto_refresh(),e.innerHTML="&nbsp;&nbsp;&nbsp;Done deleting.&nbsp;&nbsp;";for(let e=0;e<r.length;e++)r[e].style.display="block"}else if("block"==r[0].style.display){e.innerHTML="Delete countries…";for(let e=0;e<r.length;e++)r[e].style.display="none"}}else e.innerHTML="Delete countries…"}function localStorageInit(){let e=localStorage.getItem("pandemicSavedCountries");if(e&&"{}"!==e){let r=e.split(","),a="";for(let e=0;e<r.length;e++)a+=`\n      <div id="${r[e]}" class="block"></div>\n      `;document.querySelector(".country-stats").innerHTML=a}else{let e=document.querySelectorAll(".country-stats .block"),r="";for(let a=0;a<e.length;a++)r+=e[a].id,a<e.length-1&&e[a].id&&""!==e[a].id&&(r+=",");localStorage.setItem("pandemicSavedCountries",r)}}function remove_all_countries(){document.querySelector(".country-stats").innerHTML="",localStorage.setItem("pandemicSavedCountries","")}function add_all_countries(){let e=document.querySelectorAll("#country-list option");remove_all_countries();for(let r=0;r<e.length;r++){let a=e[r].value;(a=a.split(" ")).shift(),(a=a.join(" "))&&!document.getElementById(escape(a))?(console.log(a+" added."),add_country(a,!1)):document.getElementById(escape(a))&&alert(a+" is already shown.")}}function remove_country(e){e.parentNode.parentNode.remove(),console.log(unescape(e.parentNode.id)+" removed.");let r=localStorage.getItem("pandemicSavedCountries").split(",");for(let a=0;a<r.length;a++)r[a]==e.parentNode.id&&r.splice(a,1);localStorage.setItem("pandemicSavedCountries",r.join())}function add_country(e){document.querySelector(".country-stats").innerHTML+=`\n    <div id="${escape(e)}" class="block"></div>\n  `,render(escape(e));let r=[];if(null===localStorage.getItem("pandemicSavedCountries"))r=[e=escape(e)];else{(r=localStorage.getItem("pandemicSavedCountries").split(",")).push(escape(e))}localStorage.setItem("pandemicSavedCountries",r.join())}function flag_emoji(e){switch(e){case"Romania":return"🇷🇴";case"USA":return"🇺🇸";case"Global":return"🌎";case"China":return"🇨🇳";case"Italy":return"🇮🇹";case"Spain":return"🇪🇸";case"S.%20Korea":return"🇰🇷";case"Moldova":return"🇲🇩";case"Bulgaria":return"🇧🇬";case"Switzerland":return"🇨🇭";case"UK":return"🇬🇧";case"Iran":return"🇮🇷";case"France":return"🇫🇷";case"Germany":return"🇩🇪";case"Japan":return"🇯🇵";case"Belgium":return"🇧🇪";case"Netherlands":return"🇳🇱";case"Turkey":return"🇹🇷";case"Austria":return"🇦🇹";case"Canada":return"🇨🇦";case"Portugal":return"🇵🇹";case"Norway":return"🇳🇴";case"Brazil":return"🇧🇷";case"Israel":return"🇮🇱";case"Australia":return"🇦🇺";case"Sweden":return"🇸🇪";case"Czechia":return"🇨🇿";case"Malaysia":return"🇲🇾";case"Ireland":return"🇮🇪";case"Denmark":return"🇩🇰";case"Chile":return"🇨🇱";case"Luxembourg":return"🇱🇺";case"Poland":return"🇵🇱";case"Ecuador":return"🇪🇨";case"Russia":return"🇷🇺";case"Pakistan":return"🇵🇰";case"Philippines":return"🇵🇭";case"Thailand":return"🇹🇭";case"Saudi%20Arabia":return"🇸🇦";case"Indonesia":return"🇮🇩";case"Finland":return"🇫🇮";case"South%20Africa":return"🇿🇦";case"Greece":return"🇬🇷";case"Iceland":return"🇮🇸";case"India":return"🇮🇳";case"Mexico":return"🇲🇽";case"Panama":return"🇵🇦";case"Dominican%20Republic":return"🇩🇴";case"Singapore":return"🇸🇬";case"Peru":return"🇵🇪";case"Argentina":return"🇦🇷";case"Croatia":return"🇭🇷";case"Serbia":return"🇷🇸";case"Slovenia":return"🇸🇮";case"Estonia":return"🇪🇪";case"Diamond%20Princess":return"🚢";case"Colombia":return"🇨🇴";case"Qatar":return"🇶🇦";case"Hong%20Kong":return"🇭🇰";case"UAE":return"🇦🇪";case"Egypt":return"🇪🇬";case"New%20Zealand":return"🇳🇿";case"Algeria":return"🇩🇿";case"Iraq":return"🇮🇶";case"Morocco":return"🇲🇦";case"Bahrain":return"🇧🇭";case"Lithuania":return"🇱🇹";case"Armenia":return"🇦🇲";case"Ukraine":return"🇺🇦";case"Hungary":return"🇭🇺";case"Lebanon":return"🇱🇧";case"Latvia":return"🇱🇻";case"Bosnia%20and%20Herzegovina":return"🇧🇦";case"Slovakia":return"🇸🇰";case"Andorra":return"🇦🇩";case"Costa%20Rica":return"🇨🇷";case"Tunisia":return"🇹🇳";case"Uruguay":return"🇺🇾";case"Taiwan":return"🇹🇼";case"Kazakhstan":return"🇰🇿";case"North%20Macedonia":return"🇲🇰";case"Azerbaijan":return"🇦🇿";case"Kuwait":return"🇰🇼";case"Jordan":return"🇯🇴";case"San%20Marino":return"🇸🇲";case"Cyprus":return"🇨🇾";case"Réunion":return"🇷🇪";case"Albania":return"🇦🇱";case"Burkina%20Faso":return"🇧🇫";case"Vietnam":return"🇻🇳";case"Oman":return"🇴🇲";case"Afghanistan":return"🇦🇫";case"Cuba":return"🇨🇺";case"Faeroe%20Islands":case"Faroe%20Islands":return"🇫🇴";case"Ivory%20Coast":return"🇨🇮";case"Senegal":return"🇸🇳";case"Malta":return"🇲🇹";case"Ghana":return"🇬🇭";case"Belarus":return"🇧🇾";case"Uzbekistan":return"🇺🇿";case"Channel%20Islands":return"&nbsp;&nbsp;&nbsp;&thinsp;";case"Cameroon":return"🇨🇲";case"Honduras":return"🇭🇳";case"Venezuela":return"🇻🇪";case"Mauritius":return"🇲🇺";case"Brunei":return"🇧🇳";case"Sri%20Lanka":return"🇱🇰";case"Palestine":return"🇵🇸";case"Nigeria":return"🇳🇬";case"Cambodia":return"🇰🇭";case"Guadeloupe":return"🇬🇵";case"Georgia":return"🇬🇪";case"Bolivia":return"🇧🇴";case"Kyrgyzstan":return"🇰🇬";case"Martinique":return"🇲🇶";case"Montenegro":return"🇲🇪";case"Trinidad%and%Tobago":return"🇹🇹";case"Mayotte":return"🇾🇹";case"DRC":return"🇨🇩";case"Rwanda":return"🇷🇼";case"Gibraltar":return"🇬🇮";case"Paraguay":return"🇵🇾";case"Liechtenstein":return"🇱🇮";case"Kenya":return"🇰🇪";case"Aruba":return"🇦🇼";case"Bangladesh":return"🇧🇩";case"Isle%20of%20Man":return"🇮🇲";case"Monaco":return"🇲🇨";case"French%20Guiana":return"🇬🇫";case"Madagascar":return"🇲🇬";case"Macao":return"🇲🇴";case"Guatemala":return"🇬🇹";case"Jamaica":return"🇯🇲";case"French%20Polynesia":return"🇵🇫";case"Zambia":return"🇿🇲";case"Barbados":return"🇧🇧";case"Uganda":return"🇺🇬";case"Togo":return"🇹🇬";case"El%20Salvador":return"🇸🇻";case"Mali":return"🇲🇱";case"Ethiopia":return"🇪🇹";case"Niger":return"🇳🇪";case"Bermuda":return"🇧🇲";case"Guinea":return"🇬🇳";case"Congo":return"🇨🇬";case"Tanzania":return"🇹🇿";case"Djibouti":return"🇩🇯";case"Maldives":return"🇲🇻";case"Saint%20Martin":return"🇲🇫";case"Haiti":return"🇭🇹";case"New%20Caledonia":return"🇳🇨";case"Bahamas":return"🇧🇸";case"Myanmar":return"🇲🇲";case"Cayman%20Islands":return"🇰🇾";case"Equatorial%20Guinea":return"🇬🇶";case"Eritrea":return"🇪🇷";case"Mongolia":return"🇲🇳";case"Curaçao":return"🇨🇼";case"Dominica":return"🇩🇲";case"Namibia":return"🇳🇦";case"Greenland":return"🇬🇱";case"Syria":return"🇸🇾";case"Grenada":return"🇬🇩";case"Saint%20Lucia":return"🇱🇨";case"Eswatini":return"🇸🇿";case"Guyana":return"🇬🇾";case"Guinea-Bissau":return"🇬🇼";case"Laos":return"🇱🇦";case"Libya":return"🇱🇾";case"Mozambique":return"🇲🇿";case"Seychelles":return"🇸🇨";case"Suriname":return"🇸🇷";case"Angola":return"🇦🇴";case"Gabon":return"🇬🇦";case"Zimbabwe":return"🇿🇼";case"Antigua%20and%20Barbuda":return"🇦🇬";case"Saint%20Kitts%20and%20Nevis":return"🇰🇳";case"Sudan":return"🇸🇩";case"Cabo%20Verde":case"Cape%20Verde":return"🇨🇻";case"Benin":return"🇧🇯";case"Vatican%20City":return"🇻🇦";case"St.%20Barth":return"🇧🇱";case"Sint%20Maarten":return"🇸🇽";case"Nepal":return"🇳🇵";case"Chad":return"🇹🇩";case"Fiji":return"🇫🇯";case"Mauritania":return"🇲🇷";case"Montserrat":return"🇲🇸";case"Turks%20and%20Caicos":return"🇹🇨";case"Gambia":return"🇬🇲";case"Nicaragua":return"🇳🇮";case"Bhutan":return"🇧🇹";case"Belize":return"🇧🇿";case"CAR":return"🇨🇫";case"Liberia":return"🇱🇷";case"Somalia":return"🇸🇴";case"MS%20Zaandam":return"🚢";case"Anguilla":return"🇦🇮";case"British%20Virgin%20Islands":return"🇻🇬";case"Papua%20New%20Guinea":return"🇵🇬";case"St.%20Vincent%20Grenadines":return"🇻🇨";case"Timor-Leste":return"🇹🇱";case"Botswana":return"🇧🇼"}return"&nbsp;&nbsp;&nbsp;&thinsp;"}localStorageInit(),render_stuff(),document.querySelector("#country-list-choice").addEventListener("change",e=>{let r=document.getElementById("country-list-choice").value;(r=r.split(" ")).shift(),(r=r.join(" "))&&!document.getElementById(escape(r))?(console.log(r+" added."),add_country(r)):document.getElementById(escape(r))&&alert(r+" is already shown."),document.getElementById("country-list-choice").value=""});
